<?xml version="1.0" ?>
<ItemRenderer>
  <Data>
    <Sprite name="s_shoes" fileName="game/player_feet16.rttex" textureSize="32,32" frame="17,24" />
    <Sprite name="s_drops" fileName="game/particles12.rttex" textureSize="32,32" frame="13,13" />
    <StateMachines>
      <StateMachine name="Punch">
        <States>
          <State name="No" />
          <State name="Yes" />
        </States>
        <Transitions>
          <Transition to="No" from="Yes">
            <Condition>
              <IsAction operatorType="NotEqual">PUNCH</IsAction>
            </Condition>
          </Transition>
          <Transition to="Yes" from="No">
            <Condition>
              <IsAction>PUNCH</IsAction>
            </Condition>
          </Transition>
        </Transitions>
      </StateMachine>
      <StateMachine name="Mobility">
        <States>
          <State name="OnGround"/>
          <State name="InAir"/>
          <State name="Jumping"/>
          <State name="Landing"/>
        </States>
        <Transitions>
          <Transition to="Landing" from="InAir">
            <Condition>
              <IsVariableBool name="onGround">true</IsVariableBool>
            </Condition>
          </Transition>
          <Transition to="OnGround" from="Landing"/>
          <Transition to="Jumping" from="OnGround">
            <Condition>
              <IsVariableBool name="onGround">false</IsVariableBool>
            </Condition>
          </Transition>
          <Transition to="InAir" from="Jumping"/>
        </Transitions>
      </StateMachine>
    </StateMachines>
    <ParticleSystems>
      <ParticleSystem name="ps_drops">
        <Emitter>
          <Random name="particlesPerEmission" min="2" max="4"/>
          <Set name="offset">0,-14</Set>
        </Emitter>
        <Particle>
          <Set name="sprite">s_drops</Set>
          <Set name="rotateWithVelocity">true</Set>
          <Curve name="initialAlpha">
            <KeyFrame>0, 1</KeyFrame>
            <KeyFrame>0.5, 1</KeyFrame>
            <KeyFrame>1, 0</KeyFrame>
          </Curve>
          <Set name="useGravity">true</Set>
          <Curve name="initialScale">
            <KeyFrame>0, 1, 1</KeyFrame>
            <KeyFrame>1, 0.25, 0.25</KeyFrame>
          </Curve>
          <Set name="lifeTime">1</Set>
          <Set name="inSpecificOrder">true</Set>
          <RandomRadial name="initialVelocity" angleRange="210,240" radiusRange="40,60"/>
          <Set name="gravityVector">0, 60</Set>
          <Random name="offset" min="-4, 0" max="4,0"/>
        </Particle>
      </ParticleSystem>
      <ParticleSystem name="ps_drops1">
        <Emitter>
          <Random name="particlesPerEmission" min="2" max="4"/>
          <Set name="offset">0,-14</Set>
        </Emitter>
        <Particle>
          <Set name="sprite">s_drops</Set>
          <Set name="rotateWithVelocity">true</Set>
          <Curve name="initialAlpha">
            <KeyFrame>0, 1</KeyFrame>
            <KeyFrame>0.5, 1</KeyFrame>
            <KeyFrame>1, 0</KeyFrame>
          </Curve>
          <Set name="useGravity">true</Set>
          <Curve name="initialScale">
            <KeyFrame>0, 1, 1</KeyFrame>
            <KeyFrame>1, 0.25, 0.25</KeyFrame>
          </Curve>
          <Set name="lifeTime">1</Set>
          <Set name="inSpecificOrder">true</Set>
          <RandomRadial name="initialVelocity" angleRange="300,330" radiusRange="40,60"/>
          <Set name="gravityVector">0, 60</Set>
          <Random name="offset" min="-4, 0" max="4,0"/>
        </Particle>
      </ParticleSystem>
    </ParticleSystems>
    <RenderOptions>
      <Default>
        <Set name="ClothingOffsetFromShoes">-7</Set>
        <Set name="IsToRenderPants">false</Set>
        <Set name="RenderShoesWithMermaidTail">true</Set>
        <Set name="ShoesHidesBodyLegs">true</Set>
        <Set name="ShouldHover">true</Set>
        <Set name="UserNameOffset">10</Set>
        <Set name="IgnorePunchTypeCheck">true</Set>
        <Set name="ShoesShouldIgnoreRaptorLegsOffset">true</Set>
      </Default>
    </RenderOptions>
  </Data>
  <RenderRules>
    <Update>
      <Group onState="Punch.No">
        <StopIf>
          <IsZombified>true</IsZombified>
          <IsTrnsformed>true</IsTrnsformed>
          <IsSitting>true</IsSitting>
          <IsWearing slot="SHIRT">ITEM_ID_TACTICAL_STEALTH_DEVICE</IsWearing>
        </StopIf>
        <AvatarTransform class="Face" onState="Mobility.InAir|Mobility.Jumping">
          <Set name="face">NORMAL</Set>
        </AvatarTransform>
        <AvatarTransform class="ArmAngle">
          <Set name="armName">arm2Angle</Set>
          <Set name="armAngle">45</Set>
        </AvatarTransform>
        <AvatarTransform class="ArmAngle">
          <Set name="armName">arm1Angle</Set>
          <Set name="armAngle">-45</Set>
        </AvatarTransform>
      </Group>
    </Update>
    <RenderShoes>
      <SpriteRender name="s_shoes" offset="1.2,7.5" alignment="DOWN_CENTER"/>
      <ParticleSystemRender name="ps_drops"/>
      <ParticleSystemRender name="ps_drops1"/>
    </RenderShoes>
    <AddClothingParticles>
      <ParticleSystemUpdate name="ps_drops" onState="Mobility.Jumping|Mobility.Landing"/>
      <ParticleSystemUpdate name="ps_drops1" onState="Mobility.Jumping|Mobility.Landing"/>
    </AddClothingParticles>
  </RenderRules>
</ItemRenderer>
