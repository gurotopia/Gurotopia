<?xml version="1.0" ?>
<ItemRenderer>
    <Data>
        <Sprite name="Sprite28" fileName="game/player_cosmetics4.rttex" textureSize="32,32" frame="29,2" />
        <Sprite name="Sprite35" fileName="game/particles_large16.rttex" textureSize="64,64" frame="11,9" />
        <Sprite name="s_apple1" fileName="game/particles12.rttex" textureSize="32,32" frame="15,12" />
		<Sprite name="s_apple2" fileName="game/particles12.rttex" textureSize="32,32" frame="16,12" />
		<Sprite name="s_apple3" fileName="game/particles12.rttex" textureSize="32,32" frame="17,12" />
		<Sprite name="s_splat" fileName="game/particles12.rttex" textureSize="32,32" frame="14,13" />
		<Sprite name="s_chunk1" fileName="game/particles12.rttex" textureSize="32,32" frame="15,13" />
		<Sprite name="s_chunk2" fileName="game/particles12.rttex" textureSize="32,32" frame="16,13" />
		<Sprite name="s_chunk3" fileName="game/particles12.rttex" textureSize="32,32" frame="17,13" />
        <Animations>
            <SpriteAnimation name="Animation41" sprite="Sprite35" isLoop="true" autoPlay="true" playOnState="Punch.Yes" animTime="400">
                <Frame>11,9</Frame>
                <Frame>12,9</Frame>
                <Frame>13,9</Frame>
                <Frame>14,9</Frame>
            </SpriteAnimation>
        </Animations>
        <ParticleSystems>
            <ParticleSystem name="ps_apple">
                <Emitter>
					<Random name="offset" min="16, -30" max="24, -18"/>
					<Set name="lifeTime">0</Set>
					<Set name="particlesPerEmission">1</Set>
				</Emitter>
				<Particle>
					<Random name="variantId" min="0" max="3" />
					<Select name="sprite" input="variantId">
					  <Item>"s_apple1"</Item>
					  <Item>"s_apple2"</Item>
					  <Item>"s_apple3"</Item>
					</Select>
					<Set name="lifeTime">0.4</Set>
					<Random name="targetPosOffset" min="-12,-12" max="12,12"/>
					<VectorTo name="initialVelocity" source="targetPos" offset="targetPosOffset" duration="lifeTime" x="1" />
					<OnFinish>
						<ParticleSystemName>ps_splat</ParticleSystemName>
						<ParticleSystemName>ps_apple_chunk</ParticleSystemName>
					</OnFinish>
				</Particle>
            </ParticleSystem>
			<ParticleSystem name="ps_splat">
                <Emitter>
					<Set name="lifeTime">0</Set>
					<Set name="particlesPerEmission">1</Set>
				</Emitter>
				<Particle>
					<Set name="sprite">s_splat</Set>
					<Set name="lifeTime">1</Set>
					<Set name="blendingMode">PREMULTIPLIED_ALPHA</Set>
					<Curve name="initialAlpha">
						<KeyFrame>0, 1</KeyFrame>
						<KeyFrame>1, 0</KeyFrame>
					</Curve>
					<Set name="useGravity">true</Set>
					<Random name="gravityVector" min="0, 15" max="0, 25"/>
					<Curve name="initialScale">
						<KeyFrame>0, 0.25, 0.25</KeyFrame>
						<KeyFrame>1, 1, 1</KeyFrame>
					</Curve>
				</Particle>
            </ParticleSystem>
			<ParticleSystem name="ps_apple_chunk">
				<Emitter>
					<Set name="lifeTime">0.4</Set>
					<Set name="particlesPerEmission">1</Set>
					<Set name="offset">0,0</Set>
					<Set name="particlesToEmit">5</Set>
					<Set name="checkParticleNumToEmit">true</Set>
				</Emitter>
				<Particle UseParentVariantId="true">
					<Select name="sprite" input="variantId">
						<Item>"s_chunk1"</Item>
						<Item>"s_chunk2"</Item>
						<Item>"s_chunk3"</Item>
					</Select>
					<RandomRadial name="initialVelocity" angleRange="0,360" radiusRange="25,50"/>
					<Set name="blendingMode">PREMULTIPLIED_ALPHA</Set>
					<Set name="lifeTime">0.5</Set>
					<Set name="isBackgroundParticle">true</Set>
					<Curve name="initialScale">
						<KeyFrame>0, 0.5, 0.5</KeyFrame>
						<KeyFrame>1, 1, 1</KeyFrame>
					</Curve>
					<Curve name="initialAlpha">
						<KeyFrame>0, 1</KeyFrame>
						<KeyFrame>1, 0</KeyFrame>
					</Curve>
					<Random name="initialAngle" min="0" max="360"/>
				</Particle>
			</ParticleSystem>
        </ParticleSystems>
        <VariableMap />
        <StateMachines>
            <StateMachine name="Punch">
                <States>
                    <State name="No" />
                    <State name="Yes" />
                </States>
                <Transitions>
                    <Transition to="No" from="Yes">
                        <Condition>
                            <IsAction operatorType="NotEqual">PUNCH</IsAction>
                        </Condition>
                    </Transition>
                    <Transition to="Yes" from="No">
                        <Condition>
                            <IsAction>PUNCH</IsAction>
                        </Condition>
                    </Transition>
                </Transitions>
            </StateMachine>
        </StateMachines>
        <RenderOptions>
			<Default>
				<Set name="PunchSoundOverride">CHESTITEM</Set>
				<Set name="PlayDefaultPunchAudio">false</Set>
			</Default>
		</RenderOptions>
    </Data>
    <RenderRules>
        <RenderChestItem>
            <SpriteRender name="Sprite28" blend="NORMAL" alignment="DOWN_CENTER" drawShadow="true" />
        </RenderChestItem>
        <RenderChestBackItem>
            <SpriteRender name="Sprite35" blend="NORMAL" alignment="DOWN_CENTER" drawShadow="true" />
        </RenderChestBackItem>
        <OnPunchStart>
            <ParticleSystemUpdate name="ps_apple" />
        </OnPunchStart>
        <OnPunchUpdate>
			<AvatarTransform class="Face">
				<Set name="face">MAD</Set>
			</AvatarTransform>
            <AvatarTransform class="ArmAngle">
                <Set name="armName">arm1Angle</Set>
                <Set name="armAngle">-130</Set>
            </AvatarTransform>
        </OnPunchUpdate>
    </RenderRules>
</ItemRenderer>
