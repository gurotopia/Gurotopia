<?xml version="1.0" encoding="utf-8"?>
<ItemRenderer NPCType="PoisonStatusEffect">
	<Data>
		<Sprite name="sprite" fileName="game/bb_page1.rttex" textureSize="128" frame="4,4"/>
		<Sprite name="sprite_shield" fileName="game/particles_large9.rttex" textureSize="64" frame="15,5"/>
		<Sprite name="s_HitEffect" fileName="game/particles.rttex" textureSize="32" frame="10,9" />

		<StateMachines>
			<StateMachine name="NPC" ServerOnly="true">
				<States start="InitialState">
					<NPCStationary name="InitialState" ExitTime="0.2"/>
					<NPCStationary name="FullHealth" ExitTime="5"/>
					<NPCKill name="KillState"/>
				</States>
				<Transitions>
					<Transition to="FullHealth" from="InitialState"/>
					<Transition to="KillState" from="FullHealth"/>
				</Transitions>
			</StateMachine>
		</StateMachines>
		<ParticleSystems>
			<ParticleSystem name="poisonEffectArea">
				<Emitter>
					<Set name="offset">0, 0</Set>
					<Set name="infParticles">true</Set>
					<Set name="infLifeTime">true</Set>
					<Set name="checkParticleNumToEmit">false</Set>
					<Set name="emissionInterval">3.9</Set>
					<Set name="particlesPerEmission">3</Set>
					<Set name="particlesToEmit">1</Set>
				</Emitter>
				<Particle usePlayerFacing="true">
					<Set name="offset">0,0</Set>
					<Set name="sprite">sprite_shield</Set>
					<Set name="renderAlignment">CENTER</Set>
					<Set name="relativeToEmitter">true</Set>
					<Set name="collisionDamageAmount">5</Set>
					<Set name="destroyOnCollision">false</Set>
					<Set name="collisionSize">10,10</Set>
					<Set name="isCollisionDamageSecondsBased">true</Set>
					<Set name="lifeTime">4</Set>
					<Set name="initialScale">1,1</Set>
					<Set name="initialAlpha">0</Set>
					<Set name="collisionType">
						<CollisionType>PROJECTILES</CollisionType>
					</Set>
					<Set name="collisionFlag">
						<CollisionFlag>ENEMY_NPC</CollisionFlag>
					</Set>
				</Particle>
			</ParticleSystem>
			<ParticleSystem name="ps_HitEffect">
				<Emitter>
					<Set name="offset">0, -8</Set>
					<Set name="emissionInterval">0.15</Set>
					<Set name="forceXScaling">true</Set>
					<Set name="infParticles">true</Set>
					<Set name="infLifeTime">true</Set>
					<Set name="particlesPerEmission">3</Set>
				</Emitter>
				<Particle velocityRelativeToPlayerSpeed="true">
					<Set name="sprite">s_HitEffect</Set>
					<Random name="offset" min="-16, -8" max="16, 8"/>
					<Set name="rotateWithVelocity">true</Set>
					<Curve name="initialAlpha">
						<KeyFrame>0, 1</KeyFrame>
						<KeyFrame>0.8, 1</KeyFrame>
						<KeyFrame>1, 0</KeyFrame>
					</Curve>
					<Set name="useGravity">true</Set>
					<Curve name="initialScale">
						<KeyFrame>0, 0.5, 0.5</KeyFrame>
						<KeyFrame>1, 1, 1</KeyFrame>
					</Curve>
					<Set name="initalRGB">0.37,0.9,0.4</Set>
					<Set name="lifeTime">0.8</Set>
					<Set name="initialVelocity">-10, -40</Set>
					<Set name="gravityVector">0, 100</Set>
				</Particle>
			</ParticleSystem>
		</ParticleSystems>
		<Components>
			<Info/>
			<Movement>
				<Set name="IsStatic">true</Set>
			</Movement>
			<StateMachine/>
			<NPCRenderActionCmp/>
			<AttachmentCmp/>
			<Enemy>
				<Set name="SoulsReward">0</Set>
				<Set name="destroyTileId">0</Set>
			</Enemy>
			<PlayerXMLAttachmentCmp>
				<Set name="AttachmentName">"PoisonStatusEffect"</Set>
			</PlayerXMLAttachmentCmp>
			<ParentInfo/>
			<DebugDraw/>
		</Components>
	</Data>
	<RenderRules>
		<OnDie>
			<ParticleSystemOff name="poisonEffectArea"/>
			<ParticleSystemOff name="ps_HitEffect"/>
			<ApplyTintOverrideNPC TintOverride="255, 255, 255, 255" ApplyToParent="true"/>
		</OnDie>		
		<Update>
			<ParticleSystemUpdate name="ps_HitEffect" onState="NPC.FullHealth"/>
			<ParticleSystemUpdate name="poisonEffectArea" onState="NPC.FullHealth"/>
			<ApplyTintOverrideNPC TintOverride="3, 165, 3, 255" ApplyToParent="true" onState="NPC.FullHealth"/>
		</Update>
		<SwitchOffClothingParticles>
			<ParticleSystemOff name="poisonEffectArea"/>
			<ParticleSystemOff name="ps_HitEffect"/>
		</SwitchOffClothingParticles>
	</RenderRules>
</ItemRenderer>