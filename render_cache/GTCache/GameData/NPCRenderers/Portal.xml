<?xml version="1.0" encoding="utf-8"?>
<ItemRenderer NPCType="Portal">
  <Data>
    <Sprite name="s_sprite" fileName="game/particles11.rttex" textureSize="32" frame="0,23" />
    <Animations>
      <SpriteAnimation name="a_animStart" sprite="s_sprite" animTime="250" playOnState="NPC.Start">
        <Frame>0,23</Frame>
        <Frame>1,23</Frame>
        <Frame>2,23</Frame>
        <Frame>3,23</Frame>
        <Frame>4,23</Frame>
      </SpriteAnimation>
      <SpriteAnimation name="a_animContinue" sprite="s_sprite" animTime="500" isLoop="true" playOnState="NPC.SpawnWait1|NPC.Spawn|NPC.SpawnWait2">
        <Frame>5,23</Frame>
        <Frame>6,23</Frame>
        <Frame>7,23</Frame>
        <Frame>8,23</Frame>
        <Frame>9,23</Frame>
      </SpriteAnimation>
      <SpriteAnimation name="a_animEnd" sprite="s_sprite" animTime="250" playOnState="NPC.End">
        <Frame>4,23</Frame>
        <Frame>3,23</Frame>
        <Frame>2,23</Frame>
        <Frame>1,23</Frame>
        <Frame>0,23</Frame>
      </SpriteAnimation>
    </Animations>
    <StateMachines>
      <StateMachine name="NPC" ServerOnly="true">
        <States start="Off">
          <NPCAnticipation name="Off"/>
          <NPCAnticipation name="Start" ExitTime="0.25"/>
          <NPCAnticipation name="SpawnWait1" ExitTime="0.5"/>
          <RandomNPCSpawn name="Spawn" IsTemporary="true">
            <NpcList>
              "BladeofRevolt : 1,
              Shriekgazer : 1,
              WindGuardian : 1"
            </NpcList>
          </RandomNPCSpawn>
          <NPCAnticipation name="SpawnWait2" ExitTime="0.5"/>
          <NPCAnticipation name="End" ExitTime="0.25"/>
          <NPCSetTimerRandom name="SetTimer" IsTemporary="true">
            <TimerName>"timeToSpawn"</TimerName>
            <Min>15</Min>
            <Max>30</Max>
          </NPCSetTimerRandom>
        </States>
        <Transitions>
          <Transition to="Start" from="Off">
            <Condition type="and">
              <CheckTimer name="timeToSpawn">true</CheckTimer>
              <CheckNpcHealth operatorType="Greater" onlyBoss="true">50</CheckNpcHealth>
              <CheckNumberOfNpcsInWorld  Type="dynamic" operatorType="Less">15</CheckNumberOfNpcsInWorld>
            </Condition>
          </Transition>
          <Transition to="SpawnWait1" from="Start"/>
          <Transition to="Spawn" from="SpawnWait1"/>
          <Transition to="SpawnWait2" from="Spawn"/>
          <Transition to="End" from="SpawnWait2"/>
          <Transition to="SetTimer" from="End"/>
          <Transition to="Off" from="SetTimer"/>
        </Transitions>
      </StateMachine>
    </StateMachines>
    <Components>
      <Info/>
      <NPCRenderActionCmp/>
      <StateMachine/>
      <StateMachineTimer>
        <Set name="timeToSpawn">5</Set>
      </StateMachineTimer>
      <Movement/>
      <Enemy/>
      <DebugDraw/>
    </Components>
  </Data>
  <RenderRules>
    <Render>
      <SpriteRender name="s_sprite" scale="2,1.5" onState="NPC.Start|NPC.SpawnWait1|NPC.Spawn|NPC.SpawnWait2|NPC.End"/>
    </Render>
  </RenderRules>
</ItemRenderer>